{% extends "widget/header/search.html.twig" %}

{% block widget_header_search_form %}

    {% d3modcfgcheck modid="d3_extsearch" %}{% endd3modcfgcheck %}

    {% set blockParent = parent() %}

    {% if mod_d3_extsearch and false == oModCfg_d3_extsearch.isThemeIdMappedTo('mobile') %}
        {% block widget_header_search_form_replacement %}
            {% capture assign = "content" %}{{ blockParent|raw }}{% endcapture %}

            {% capture assign = "search" %}{% apply spaceless %}
                name="search"
            {% endapply %}{% endcapture %}

            {% capture assign = "replace" %}{% apply spaceless %}
                name="search" onSubmit="d3_extsearch_popup.popup.load();" autocomplete="off" spellcheck="false"
            {% endapply %}{% endcapture %}

            {{ content|replace({(search): replace})|raw }}
        {% endblock %}
    {% else %}
        {{ parent() }}
    {% endif %}

{% endblock %}

{% block header_search_field %}

    {% d3modcfgcheck modid="d3_extsearch" %}{% endd3modcfgcheck %}

    {% if mod_d3_extsearch and false == oModCfg_d3_extsearch.isThemeIdMappedTo('mobile') %}

        {% capture assign = "content" %}{{ parent() }}{% endcapture %}

        {% block d3_extsearch_header_searchfield_searchparam %}

            {% capture assign = "search" %}{% apply spaceless %}
                id="searchParam"
            {% endapply %}{% endcapture %}

            {% capture assign = "replace" %}{% apply spaceless %}
                {{ search|raw }} autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" suggestLeftOffsetPx="0" suggestTopOffsetPx="0"
            {% endapply %}{% endcapture %}

            {{ content|raw|replace({(search): replace})|raw }}
        {% endblock %}

        {% if blOwnFormFields %}
            {% block d3_extsearch_header_searchfield_ownformfields %}
                {# ** Fuegen Sie hier bei Bedarf noch weitere Filtermoeglichkeiten hinzu ** #}
                {# Gesucht wird nach Teilen mit LIKE #}
                <label for="liketitle">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_LIKETITLE" }) }}</label>
                <input type="text" name="d3searchlike[oxtitle]" id="liketitle" value="{{ aD3SearchLike.oxtitle }}" size="21" class="txt"><br>
                {# <input type="text" name="d3searchlike[oxshortdesc]" value="{{ aD3SearchLike.oxshortdesc }}" size="21" class="txt"> #}
                {# Gesucht wird nach genauem Wortlaut mit = #}
                <label for="isartnum">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_ISARTNUM" }) }}</label>
                <input type="text" name="d3searchis[oxartnum]" id="isartnum" value="{{ aD3SearchIs.oxartnum }}" size="21" class="txt"><br>
                {# <input type="text" name="d3searchis[oxshortdesc]" value="{{ aD3SearchIs.oxshortdesc }}" size="21" class="txt"> #}
                <label for="isstock">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_ISBETWEENSTOCK" }) }}</label>
                <select name="d3searchis[oxstock]" id="isstock">
                    <option value="">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_CHOOSESTOCK" }) }}</option>    {# change description to your requirements #}
                    <option value="BETWEEN__AND_5_" {% if aD3SearchIs.oxstock == 'BETWEEN__AND_5_' %} selected{% endif %}>bis 5</option>
                    <option value="BETWEEN_3_AND_7_" {% if aD3SearchIs.oxstock == 'BETWEEN_3_AND_7_' %} selected{% endif %}>von 3 bis 7</option>
                    <option value="BETWEEN_8_AND_200_" {% if aD3SearchIs.oxstock == 'BETWEEN_8_AND_200_' %} selected{% endif %}>von 8 bis 200</option>
                    <option value="BETWEEN_201_AND__" {% if aD3SearchIs.oxstock == 'BETWEEN_201_AND__' %} selected{% endif %}>ab 201</option>
                </select><br>
                <label for="isprice">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_ISBETWEENPRICE" }) }}</label>
                <select name="d3searchis[oxprice]" id="isprice">
                    <option value="">{{ translate({ ident: "D3_CUSTOMFIELDTEXT_CHOOSEPRICE" }) }}</option>  {# change description to your requirements #}
                    <option value="BETWEEN__AND_3.5_" {% if aD3SearchIs.oxprice == 'BETWEEN__AND_3.5_' %} selected{% endif %}>bis 3,50</option>
                    <option value="BETWEEN_3_AND_8.7_" {% if aD3SearchIs.oxprice == 'BETWEEN_3_AND_8.7_' %} selected{% endif %}>von 3,00 bis 8,70</option>
                    <option value="BETWEEN_8.71_AND__" {% if aD3SearchIs.oxprice == 'BETWEEN_8.71_AND__' %} selected{% endif %}>ab 8,71</option>
                </select><br>
                {{ translate({ ident: "D3_CUSTOMFIELDTEXT_BITSET" }) }}
                <input type="hidden" name="d3searchbitset[bitfield][]" value="">
                <input type="checkbox" name="d3searchbitset[bitfield][]" value="1" {% if aD3SearchBitSet.bitfield and '1' in aD3SearchBitSet.bitfield %}checked{% endif %} onchange="d3_extsearch_popup.popup.load(); this.form.submit();" id="bitfield1"> <label for="bitfield1">1</label><br>
                <input type="checkbox" name="d3searchbitset[bitfield][]" value="2" {% if aD3SearchBitSet.bitfield and '2' in aD3SearchBitSet.bitfield %}checked{% endif %} onchange="d3_extsearch_popup.popup.load(); this.form.submit();" id="bitfield2"> <label for="bitfield2">2</label><br>
                <input type="checkbox" name="d3searchbitset[bitfield][]" value="4" {% if aD3SearchBitSet.bitfield and '4' in aD3SearchBitSet.bitfield %}checked{% endif %} onchange="d3_extsearch_popup.popup.load(); this.form.submit();" id="bitfield3"> <label for="bitfield3">4</label><br>
                <input type="checkbox" name="d3searchbitset[bitfield][]" value="8" {% if aD3SearchBitSet.bitfield and '8' in aD3SearchBitSet.bitfield %}checked{% endif %} onchange="d3_extsearch_popup.popup.load(); this.form.submit();" id="bitfield4"> <label for="bitfield4">8</label><br>
            {% endblock %}
        {% endif %}
    {% else %}
        {{ parent() }}
    {% endif %}

{% endblock %}