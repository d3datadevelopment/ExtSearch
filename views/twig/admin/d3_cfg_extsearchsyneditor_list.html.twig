{% include "headitem.html.twig" with {title: "GENERAL_ADMIN_TITLE"|translate, box: "list"} %}

{% if readonly %}
    {% set readonly = "readonly disabled" %}
{% else %}
    {% set readonly = "" %}
{% endif %}

{% set where = oView.getListFilter() %}

<script type="text/javascript">
    window.onload = function () {
        top.reloadEditFrame();
    }

    function EditThis( sID)
    {
        let oTransfer = parent.edit.document.getElementById("transfer");
        oTransfer.oxid.value=sID;
        oTransfer.cl.value='{% if actlocation %}{{ actlocation|escape("js") }}{% else %}{{ default_edit|escape("js") }}{% endif %}';

        //forcing edit frame to reload after submit
        top.forceReloadingEditFrame();

        let oSearch = document.getElementById("search");
        oSearch.oxid.value=sID;
        oSearch.submit();
    }
</script>

<div id="liste">
    <form name="search" id="search" action="{{ oViewConf.getSelfLink()|raw}}" method="post">
        {% include "_formparams.html.twig" with {cl: oViewConf.getActiveClassName(), lstrt: lstrt, actedit: actedit, oxid: oxid, fnc: "", language: actlang, editlanguage: actlang} %}
        <input type="hidden" name="delete_oxtime" value="">
        <input type="hidden" name="delete_oxmodid" value="">
        <input type="hidden" name="delete_oxtype" value="">

        <table style="padding:0;border:0;width:100%">
            <colgroup>
                <col style="width:30%">
                <col style="width:50%">
                <col style="width:9%">
                <col style="width:2%">
            </colgroup>
            <tr class="listitem">
                <td style="height:20px; vertical-align: middle" class="listfilter first" nowrap>
                    <div class="r1"><div class="b1">
                        <input class="listedit" type="text" size="50" maxlength="250" name="where[{{ listTable }}][word]" value="{{ where.d3_extsearch_term.word }}" {% include "help.html.twig" with {helpid: "searchfieldoxdynamic"} %}>
                        {% include "inputhelp.html.twig" with {'sHelpId': help_id("D3_EXTSEARCH_SYNED_WORD_DESC"), 'sHelpText': help_text("D3_EXTSEARCH_SYNED_WORD_DESC")} %}
                    </div></div>
                </td>
                <td style="height:20px;vertical-align: middle" class="listfilter" nowrap>
                    <div class="r1"><div class="b1">
                    </div></div>
                </td>
                <td style="height:20px; vertical-align: middle" colspan="2" class="listfilter" nowrap>
                    <div class="r1"><div class="b1">
                        <div class="find">
                            <input class="listedit" type="submit" name="submitit" value="{{ translate({ ident: "GENERAL_SEARCH" }) }}" onClick="document.search.lstrt.value=0;">
                        </div>
                        <input class="listedit" type="text" size="8" maxlength="128" name="where[{{ listTable }}][synset_id]" value="{{ where.d3_extsearch_term.synset_id }}" {% include "help.html.twig" with {helpid: "searchfieldoxdynamic"} %}>
                        {% include "inputhelp.html.twig" with {'sHelpId': help_id("D3_EXTSEARCH_SYNED_SYNSETID_DESC"), 'sHelpText': help_text("D3_EXTSEARCH_SYNED_SYNSETID_DESC")} %}
                    </div></div>
                </td>
            </tr>
            <tr>
                <td class="listheader first" style="height:15px">&nbsp;
                    <a href="#" onclick="top.oxid.admin.setSorting( document.search, 'd3_extsearch_term', 'word', 'asc');document.search.submit();" class="listheader">{{ translate({ ident: "D3_EXTSEARCH_SYNED_WORD" }) }}</a>
                </td>
                <td class="listheader" style="height:15px">&nbsp;
                    {{ translate({ ident: "D3_EXTSEARCH_SYNED_ALTWORD" }) }}
                </td>
                <td class="listheader" style="height:15px">&nbsp;
                    <a href="#" onclick="top.oxid.admin.setSorting( document.search, 'd3_extsearch_term', 'synset_id', 'asc');document.search.submit();" class="listheader">{{ translate({ ident: "D3_EXTSEARCH_SYNED_SYNSETID" }) }}</a>
                </td>
                <td class="listheader" style="height:15px">&nbsp;
                </td>
            </tr>

            {% set blWhite = "" %}
            {% set _cnt = 0 %}
            {% for listitem in mylist %}
                {% set _cnt = _cnt+1 %}
                <tr id="row.{{ _cnt }}">

                    {% if listitem.blacklist == 1 %}
                        {% set listclass = "listitem3" %}
                    {% else %}
                        {% set listclass = "listitem"|cat(blWhite) %}
                    {% endif %}
                    {% if listitem.d3_extsearch_term__oxid.value == oxid %}
                        {% set listclass = "listitem4" %}
                    {% endif %}

                    <td style="vertical-align: top; height: 15px" class="{{ listclass }}"><div class="listitemfloating"><a href="Javascript:EditThis('{{ listitem.d3_extsearch_term__oxid.value }}');" class="{{ listclass }}">{{ listitem.d3_extsearch_term__word.value }}</a></div></td>
                    <td style="vertical-align: top; height: 15px" class="{{ listclass }}"><div class="listitemfloating"><a href="Javascript:EditThis('{{ listitem.d3_extsearch_term__oxid.value }}');" class="{{ listclass }}">{{ listitem.getSynonymsForSynsetId( listitem.d3_extsearch_term__synset_id.value, listitem.d3_extsearch_term__word.value) }}</a></div></td>
                    <td style="vertical-align: top; height: 15px" class="{{ listclass }}"><div class="listitemfloating"><a href="Javascript:EditThis('{{ listitem.d3_extsearch_term__oxid.value }}');" class="{{ listclass }}">{{ listitem.d3_extsearch_term__synset_id.value }}</a></div></td>
                    <td style="vertical-align: top; height: 15px" class="{{ listclass }}"><div class="listitemfloating"><a href="Javascript:top.oxid.admin.deleteThis('{{ listitem.d3_extsearch_term__oxid.value }}');"  class="delete" id="del.{{ _cnt }}" title="" {% include "help.html.twig" with {helpid: "item_delete"} %}></a></div></td>
                </tr>
                {% if blWhite == "2" %}
                    {% set blWhite = "" %}
                {% else %}
                    {% set blWhite = "2" %}
                {% endif %}
            {% endfor %}

            {% include "pagenavisnippet.html.twig" with {colspan: "4"} %}
        </table>
    </form>
</div>

{% include "pagetabsnippet.html.twig" %}

<script type="text/javascript">
    if (parent.parent)
    {
        parent.parent.sShopTitle   = "{{ actshopobj.oxshops__oxname.getRawValue()|addslashes }}";
        parent.parent.sMenuItem    = "{{ translate({ ident: "d3mxlog" }) }}";
        parent.parent.sMenuSubItem = "{{ translate({ ident: "d3mxlog_main" }) }}";
        parent.parent.sWorkArea    = "{{ _act }}";
        parent.parent.setTitle();
    }
</script>

</body>
</html>